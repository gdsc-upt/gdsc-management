@using GdscManagement.Services
@inherits BaseComponent
@inject PreferencesService PreferencesService

<MudMenu AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight">
    <ActivatorContent>
        <MudChip Size="Size.Large" Class="pa-0" Color="Color.Primary" Variant="Variant.Filled">
            <MudAvatar
                Variant="Variant.Outlined"
                Color="Color.Tertiary"
                Style="width: 27px; height: 27px"
                Image="@User?.Avatar"
                Elevation="25"
                Class="ml-3"
                Alt="@User?.ToString()"
                referrerpolicy="no-referrer"/>

            <MudTooltip Text="Open user menu">
                <MudIconButton
                    Icon="fa-solid fa-gear"
                    Class="spin spin-on-hover"
                    Size="Size.Medium"
                    Color="Color.Success"/>
            </MudTooltip>
        </MudChip>
    </ActivatorContent>

    <ChildContent>
        <MudMenuItem
            OnClick="PreferencesService.ToggleDarkMode"
            IconColor="Color.Primary"
            Icon="@(PreferencesService.IsDarkMode ? "fa-solid fa-sun" : "fa-solid fa-moon")">
            @(PreferencesService.IsDarkMode ? "Light Mode" : "Dark Mode")
        </MudMenuItem>

        <MudMenuItem
            IconColor="Color.Primary"
            Icon="fa-solid fa-id-card"
            ForceLoad="true"
            Href="Identity/Account/Manage/Index">
            Profile
        </MudMenuItem>

        <MudMenuItem
            Href="Identity/Account/Logout"
            ForceLoad="true"
            IconColor="Color.Error"
            Icon="fa-solid fa-person-through-window">
            Log out
        </MudMenuItem>
    </ChildContent>
</MudMenu>
